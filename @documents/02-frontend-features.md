# 02. 프론트엔드 기능 상세

이 문서는 React UI의 페이지/기능과 상태 관리 구조를 설명합니다. 프론트엔드는 Tauri invoke를 통해 Rust 명령을 호출하며, 계정/설정/프록시 기능을 UI로 제공합니다.

## 1) 라우팅 구조

- `/` → **Dashboard**
- `/accounts` → **Accounts**
- `/api-proxy` → **API Proxy**
- `/monitor` → **Monitor**
- `/token-stats` → **TokenStats**
- `/security` → **Security**
- `/settings` → **Settings**

초기 진입 시 Layout, ThemeManager, AdminAuthGuard, DebugConsole, UpdateNotification 등이 함께 구성됩니다.

## 2) 상태 관리 (Zustand)

### useAccountStore

- 계정 목록/현재 계정 로딩
- 계정 추가/삭제/일괄 삭제/순서 변경
- 계정 전환, 쿼터 갱신
- OAuth 계정 추가 흐름
- DB 마이그레이션/동기화
- 프록시 상태 토글, 워밍업 트리거
- Codex 계정 목록/사용량 연동 및 통합 표시

### useConfigStore

- 설정 로드/저장, 테마/언어 변경
- UI 표시용 옵션(예: 쿼터 표시 방식) 저장

## 3) 주요 페이지 기능

### 3-1. Dashboard

- 계정 수, 평균 쿼터(여러 모델), 낮은 쿼터 계정 수 등 통계 표시
- 현재 활성 계정 상태 표시, 새로고침 및 계정 전환 지원
- 계정 JSON 내보내기 기능 제공(Desktop/Web 분기 처리)

### 3-2. Accounts

- **목록/그리드 전환** 및 로컬 스토리지에 사용자 뷰 설정 저장
- 검색/필터(프로/울트라/프리) 및 페이징 지원
- 계정 추가(토큰/OAuth) 및 계정 상세보기
- 계정 삭제/일괄 삭제/순서 변경(드래그 지원)
- **프록시 사용 토글**, **403/차단 상태 표시**, **개별 또는 전체 워밍업**
- **장치 지문(Device Fingerprint) 관리**: 계정에 기기 프로필을 바인딩/적용

### 3-3. API Proxy

프록시 서비스와 모델 라우팅, 관리자/보안 설정을 관리하는 핵심 페이지입니다.

- 프록시 서비스 시작/정지, 상태 확인
- API 키/관리자 패스워드 표시 및 재생성
- 프로토콜별 베이스 URL/모델 정보 제공
- **모델 매핑(Custom Mapping)** 및 **PM Router 설정**
- **CLI Sync**: Claude/Codex/Gemini CLI 설정 동기화 상태/실행
- **Cloudflared** 터널 설치/실행/상태 확인
- **Z.ai 연동 및 모델 매핑 관리**
- **세션 바인딩 해제/레이트리밋 초기화/모니터링 토글**
- **인증 모드/관리자 비밀번호/업스트림 프록시/디버그 로깅 등 프록시 세부 설정**

### 3-4. Monitor

- 프록시 요청 로그/통계를 실시간으로 확인하는 화면.
- 서버에서 전달되는 ProxyMonitor 이벤트와 로그 DB를 기반으로 렌더링.

### 3-5. TokenStats

- 시간 범위(시간/일/주)와 뷰 모드(모델/계정) 전환
- 총 토큰/요청 수 요약, 모델/계정 사용량 Top 차트
- 스택 영역 그래프/파이 차트 등 시각화

### 3-6. Security

- IP 접근 로그, 통계, 블랙리스트/화이트리스트 관리, 보안 설정 탭 제공
- 각 탭은 별도 컴포넌트에서 데이터 로딩/관리 수행

### 3-7. Settings

- 일반/계정/프록시/고급/디버그/소개 탭 제공
- 자동 실행, 언어/테마, 업데이트 설정
- 로그/캐시 정리 기능
- **스마트 워밍업/쿼터 보호/핀 고정 모델/Thinking Budget/회로 차단기** 등 고급 설정 포함
- 디버그 콘솔 활성화/비활성화

## 4) 공통 UI/기능 컴포넌트

- **Toast/Modal/Dialog**: 알림 및 사용자 확인 흐름
- **DebugConsole**: 백엔드 로그 브리지와 연계된 디버그 표시
- **UpdateNotification**: 자동 업데이트 확인 및 안내
- **AdminAuthGuard**: 관리자 인증 상태 확인 후 렌더링 제어

## 5) 프런트엔드 호출 흐름 요약

1. UI에서 사용자 액션 발생
2. Zustand Store에서 서비스 호출
3. Tauri invoke → Rust Command 실행
4. 결과 반환 및 UI 상태 업데이트

이 구조를 이해하면 UI 변경 시 어떤 명령/모듈이 영향을 받는지 빠르게 파악할 수 있습니다.
